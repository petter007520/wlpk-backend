(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_tool-member-footprint"],{"013c":function(t,i,e){"use strict";e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("c975"),e("a9e3"),e("ac1f"),e("5319"),e("acd8");var o={type:"scrolldone",target:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},currentTarget:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},detail:{}},n={props:{backgroundTextStyle:{type:String,default:"dark",validator:function(t){return-1!==["dark","light"].indexOf(t)}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created:function(){var t=this,i=getCurrentPages()[0];this.$pageVm=i.$vm||i,uni.onWindowResize((function(i){t.$emit("resize",i)})),this.$pageVm.$on("hook:onPageScroll",(function(i){t.$emit("scroll",i)})),this.$watch("backgroundTextStyle",(function(){t.setBackgroundTextStyle()})),this.$watch((function(){return[t.rootFontSize,t.pageStyle]}),(function(){t.setPageMeta()})),this.$watch((function(){return[t.backgroundColor,t.backgroundColorTop,t.backgroundColorBottom]}),(function(){t.setBackgroundColor()})),this.$watch((function(){return[t.scrollTop,t.scrollDuration]}),(function(){t.pageScrollTo()}))},beforeMount:function(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle()},mounted:function(){this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh:function(t,i){t.setStyle({pullToRefresh:{support:i,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta:function(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle:function(){},setBackgroundColor:function(){},pageScrollTo:function(){var t=this,i=String(this.scrollTop);if(-1!==i.indexOf("rpx")&&(i=uni.upx2px(i.replace("rpx",""))),i=parseFloat(i),!isNaN(i)){var e=function e(n){n.scrollTop===i&&(t.$pageVm.$off("hook:onPageScroll",e),t.$emit("scrolldone",o))};uni.pageScrollTo({scrollTop:i,duration:this.scrollDuration,success:function(){t.$pageVm.$on("hook:onPageScroll",e)}})}}}};i.default=n},"0f03e":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return o}));var o={pageMeta:e("6d42").default,nsEmpty:e("7441").default,nsLogin:e("8f22").default,loadingCover:e("cfb1").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("page-meta",{attrs:{"page-style":t.themeColor}}),e("v-uni-view",{staticClass:"container"},[t.token?e("v-uni-view",{staticClass:"head-wrap"},[e("v-uni-text",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.manageFootprint.apply(void 0,arguments)}}},[t._v(t._s(t.manage?"完成":"管理"))])],1):t._e(),t.token?e("mescroll-uni",{ref:"mescroll",attrs:{top:"110rpx"},on:{getData:function(i){arguments[0]=i=t.$handleEvent(i),t.getListData.apply(void 0,arguments)}}},[e("template",{attrs:{slot:"list"},slot:"list"},[t.goodsList.length?e("v-uni-view",{staticClass:"goods-list single-column"},t._l(t.goodsList,(function(i,o){return e("v-uni-view",{key:o},[e("v-uni-view",{staticClass:"datetime"},[t._v(t._s(t.datetime(i)))]),e("v-uni-view",{staticClass:"goods-item",class:{manage:t.manage}},[t.manage?e("v-uni-view",{staticClass:"checkbox-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.singleElection(i)}}},[e("v-uni-text",{staticClass:"iconfont",class:-1!=t.$util.inArray(i.id,t.idArr)?"icon-yuan_checked color-base-text":"icon-yuan_checkbox"})],1):t._e(),e("v-uni-view",{staticClass:"goods-img",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDetail(i)}}},[e("v-uni-image",{attrs:{src:t.goodsImg(i.goods_image),mode:"widthFix"},on:{error:function(i){arguments[0]=i=t.$handleEvent(i),t.imgError(o)}}}),""!=t.goodsTag(i)?e("v-uni-view",{staticClass:"color-base-bg goods-tag"},[t._v(t._s(t.goodsTag(i)))]):t._e()],1),e("v-uni-view",{staticClass:"info-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDetail(i)}}},[e("v-uni-view",{staticClass:"name-wrap"},[e("v-uni-view",{staticClass:"goods-name"},[t._v(t._s(i.goods_name))])],1),e("v-uni-view",{staticClass:"lineheight-clear"},[e("v-uni-view",{staticClass:"discount-price"},[e("v-uni-text",{staticClass:"unit price-style small"},[t._v(t._s(t.$lang("common.currencySymbol")))]),e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.showPrice(i)).toFixed(2).split(".")[0]))]),e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.showPrice(i)).toFixed(2).split(".")[1]))])],1),i.member_price&&i.member_price==t.showPrice(i)?e("v-uni-view",{staticClass:"member-price-tag"},[e("v-uni-image",{attrs:{src:t.$util.img("public/uniapp/index/VIP.png"),mode:"widthFix"}})],1):1==i.promotion_type?e("v-uni-view",{staticClass:"member-price-tag"},[e("v-uni-image",{attrs:{src:t.$util.img("public/uniapp/index/discount.png"),mode:"widthFix"}})],1):t._e()],1),e("v-uni-view",{staticClass:"pro-info"},[t.showMarketPrice(i)?e("v-uni-view",{staticClass:"delete-price font-size-activity-tag color-tip price-font"},[e("v-uni-text",{staticClass:"unit"},[t._v(t._s(t.$lang("common.currencySymbol")))]),e("v-uni-text",[t._v(t._s(t.showMarketPrice(i)))])],1):t._e(),i.sale_show?e("v-uni-view",{staticClass:"sale font-size-activity-tag color-tip"},[t._v("已售"+t._s(i.sale_num)+t._s(i.unit?i.unit:"件"))]):t._e()],1)],1)],1)],1)})),1):e("v-uni-view",[e("ns-empty",{attrs:{text:"暂无浏览过的商品"}})],1),t.goodsList.length&&t.manage?e("v-uni-view",{staticClass:"bottom-wrap"},[e("v-uni-view",{staticClass:"all-election",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.allElection.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"iconfont",class:t.isAll?"icon-yuan_checked color-base-text":"icon-yuan_checkbox"}),e("v-uni-text",[t._v("全选")])],1),e("v-uni-view",{staticClass:"action-btn"},[e("v-uni-button",{staticClass:"delete",class:{disabled:t.selected},attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteFootprint()}}},[t._v("删除")])],1)],1):t._e()],1)],2):t._e(),e("ns-login",{ref:"login"}),e("loading-cover",{ref:"loadingCover"})],1)],1)},a=[]},"33ac":function(t,i,e){"use strict";var o=e("bba9"),n=e.n(o);n.a},"34c7":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){}));var o=function(){var t=this.$createElement,i=this._self._c||t;return i("v-uni-view",{staticStyle:{display:"none"}},[this._t("default")],2)},n=[]},"60ba":function(t,i,e){var o=e("24fb");i=o(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */[data-v-0c71cb08] .empty{margin-top:0!important}.empty[data-v-0c71cb08]{margin-top:%?100?%}.head-wrap[data-v-0c71cb08]{width:100vw;height:%?90?%;line-height:%?90?%;background:#fff;box-sizing:border-box;padding:0 %?30?%;text-align:right}.goods-list.single-column[data-v-0c71cb08]{margin:0 %?30?%}.goods-list.single-column .checkbox-wrap[data-v-0c71cb08]{margin-right:%?20?%;display:flex;align-items:center}.goods-list.single-column .checkbox-wrap .iconfont[data-v-0c71cb08]{font-size:%?40?%;color:#ccc}.goods-list.single-column .datetime[data-v-0c71cb08]{line-height:1.5;font-size:%?28?%}.goods-list.single-column .goods-item[data-v-0c71cb08]{padding:%?26?%;background:#fff;border-radius:%?10?%;display:flex;position:relative;margin:%?20?% 0}.goods-list.single-column .goods-item.first-child[data-v-0c71cb08]{margin-top:0}.goods-list.single-column .goods-item .goods-img[data-v-0c71cb08]{width:%?200?%;height:%?200?%;overflow:hidden;border-radius:%?10?%;margin-right:%?20?%}.goods-list.single-column .goods-item .goods-img uni-image[data-v-0c71cb08]{width:100%;height:100%}.goods-list.single-column .goods-item .goods-tag[data-v-0c71cb08]{color:#fff;line-height:1;padding:%?8?% %?12?%;position:absolute;border-top-left-radius:%?10?%;border-bottom-right-radius:%?10?%;top:%?26?%;left:%?26?%;font-size:%?22?%}.goods-list.single-column .goods-item .goods-tag-img[data-v-0c71cb08]{position:absolute;border-top-left-radius:%?10?%;width:%?80?%;height:%?80?%;top:%?26?%;left:%?26?%;z-index:5;overflow:hidden}.goods-list.single-column .goods-item .goods-tag-img uni-image[data-v-0c71cb08]{width:100%;height:100%}.goods-list.single-column .goods-item .info-wrap[data-v-0c71cb08]{flex:1;display:flex;flex-direction:column;width:calc(100% - %?220?%)}.goods-list.single-column .goods-item.manage .info-wrap[data-v-0c71cb08]{width:calc(100% - %?280?%)}.goods-list.single-column .goods-item .name-wrap[data-v-0c71cb08]{flex:1}.goods-list.single-column .goods-item .goods-name[data-v-0c71cb08]{font-size:%?28?%;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;height:%?68?%}.goods-list.single-column .goods-item .introduction[data-v-0c71cb08]{line-height:1;margin-top:%?10?%}.goods-list.single-column .goods-item .discount-price[data-v-0c71cb08]{display:inline-block;font-weight:700;line-height:1;margin-top:%?16?%;color:var(--price-color)}.goods-list.single-column .goods-item .discount-price .unit[data-v-0c71cb08]{margin-right:%?6?%}.goods-list.single-column .goods-item .pro-info[data-v-0c71cb08]{display:flex;margin-top:auto}.goods-list.single-column .goods-item .pro-info .delete-price[data-v-0c71cb08]{text-decoration:line-through;flex:1}.goods-list.single-column .goods-item .pro-info .delete-price .unit[data-v-0c71cb08]{margin-right:%?6?%}.goods-list.single-column .goods-item .pro-info > uni-view[data-v-0c71cb08]{line-height:1}.goods-list.single-column .goods-item .pro-info > uni-view[data-v-0c71cb08]:nth-child(2){text-align:right}.goods-list.single-column .goods-item .member-price-tag[data-v-0c71cb08]{display:inline-block;width:%?60?%;line-height:1;margin-left:%?6?%}.goods-list.single-column .goods-item .member-price-tag uni-image[data-v-0c71cb08]{width:100%;max-height:%?30?%}.bottom-wrap[data-v-0c71cb08]{position:fixed;z-index:5;width:100vw;height:%?100?%;background:#fff;bottom:var(--window-bottom);overflow:hidden;display:flex;bottom:0;z-index:9}.bottom-wrap .all-election[data-v-0c71cb08]{flex:1;height:%?100?%;position:relative;display:inline-block}.bottom-wrap .all-election > .iconfont[data-v-0c71cb08]{font-size:%?40?%;position:absolute;top:50%;left:%?30?%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.bottom-wrap .all-election > .icon-yuan_checkbox[data-v-0c71cb08]{color:#ccc}.bottom-wrap .all-election > uni-text[data-v-0c71cb08]{margin-left:%?56?%;line-height:%?100?%;padding-left:%?30?%}.bottom-wrap .action-btn[data-v-0c71cb08]{flex:1;width:%?180?%;height:%?100?%;line-height:%?100?%;border-radius:0;margin:0;display:flex;align-items:center;justify-content:flex-end}.bottom-wrap .action-btn uni-button[data-v-0c71cb08]{width:%?180?%;height:%?70?%;line-height:%?70?%}',""]),t.exports=i},"6d42":function(t,i,e){"use strict";e.r(i);var o=e("34c7"),n=e("8f28");for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);var s=e("f0c5"),r=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);i["default"]=r.exports},"6e0a":function(t,i,e){"use strict";e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("99af"),e("d401"),e("d3b7"),e("25f0"),e("acd8"),e("14d9"),e("a434"),e("159b");var o=[],n={data:function(){return{goodsList:[],current:-1,manage:!1,idArr:[],mescroll:null,isSub:!1,token:null}},onShow:function(){var t=this;uni.getStorageSync("token")?(this.token=uni.getStorageSync("token"),this.$refs.mescroll&&this.$refs.mescroll.refresh()):setTimeout((function(){t.$refs.login.open("/pages_tool/member/footprint")}))},computed:{selected:function(){return 0==this.idArr.length},isAll:function(){return this.idArr.length==this.goodsList.length}},methods:{getListData:function(t){var i=this;this.mescroll=t,this.$api.sendRequest({url:"/api/goodsbrowse/page",data:{page:t.num,page_size:t.size},success:function(e){var n=[],a=e.message;0==e.code&&e.data?n=e.data.list:i.$util.showToast({title:a}),t.endSuccess(n.length),1==t.num&&(i.goodsList=[]),i.goodsList=i.goodsList.concat(n),o=[],i.$refs.loadingCover&&i.$refs.loadingCover.hide()},fail:function(e){t.endErr(),i.$refs.loadingCover&&i.$refs.loadingCover.hide()}})},longpress:function(t){this.current=t},deleteFootprint:function(){var t=this;0!=this.idArr.length?this.isSub||(this.isSub=!0,this.$api.sendRequest({url:"/api/goodsbrowse/delete",data:{id:this.idArr.toString()},success:function(i){t.isSub=!1,i.code>=0?(t.idArr=[],t.mescroll.resetUpScroll()):t.$util.showToast({title:i.message})}})):this.$util.showToast({title:"请选择要删除的数据！"})},manageFootprint:function(){this.manage=!this.manage,o=[]},goodsImg:function(t){var i=t.split(",");return i[0]?this.$util.img(i[0],{size:"mid"}):this.$util.getDefaultImage().goods},imgError:function(t){o=[],this.goodsList[t].goods_image=this.$util.getDefaultImage().goods},showPrice:function(t){var i=t.discount_price;return t.member_price&&parseFloat(t.member_price)<parseFloat(i)&&(i=t.member_price),i},showMarketPrice:function(t){if(t.market_price_show){var i=this.showPrice(t);if(t.market_price>0)return t.market_price;if(parseFloat(t.price)>parseFloat(i))return t.price}return""},goodsTag:function(t){return t.label_name||""},datetime:function(t){var i=new Date;i.setTime(1e3*t.browse_time);var e=i.getFullYear(),n=i.getMonth()+1;n=n<10?"0"+n:n;var a=i.getDate();a=a<10?"0"+a:a;var s=e+"/"+n+"/"+a;if(-1==this.$util.inArray(s,o))return o.push(s),s},singleElection:function(t){-1==this.$util.inArray(t.id,this.idArr)?this.idArr.push(t.id):this.idArr.splice(this.$util.inArray(t.id,this.idArr),1),o=[]},allElection:function(){if(this.idArr.length!=this.goodsList.length){this.idArr=[];var t=[];this.goodsList.forEach((function(i){t.push(i.id)})),this.idArr=t}else this.idArr=[];o=[]},toDetail:function(t){this.$util.redirectTo("/pages/goods/detail",{goods_id:t.goods_id})}},watch:{storeToken:function(t,i){t&&(this.token=t,this.$refs.mescroll.refresh())}}};i.default=n},"8f28":function(t,i,e){"use strict";e.r(i);var o=e("013c"),n=e.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=n.a},"9af9":function(t,i,e){"use strict";e.r(i);var o=e("0f03e"),n=e("a1fe");for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);e("33ac");var s=e("f0c5"),r=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"0c71cb08",null,!1,o["a"],void 0);i["default"]=r.exports},a1fe:function(t,i,e){"use strict";e.r(i);var o=e("6e0a"),n=e.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=n.a},bba9:function(t,i,e){var o=e("60ba");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=e("4f06").default;n("029dc32a",o,!0,{sourceMap:!1,shadowMode:!1})}}]);